type UTokenBorrow @entity {
  id: ID!
  onBehalfOf: Bytes!
  iniciator: Bytes!
  amount: BigInt!
  loanId: Bytes!
  underlyingAsset: Bytes!
  borrowRate: BigInt!

  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type UTokenRepay @entity {
  id: ID!
  iniciator: Bytes!
  loanId: Bytes!
  underlyingAsset: Bytes!
  amount: BigInt!
  onBehalfOf: Bytes!
  borrowRate: BigInt!

  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type Supply @entity {
  id: ID!
  user: Bytes!
  onBehalfOf: Bytes!
  underlyingAsset: Bytes!
  amount: BigInt!
  
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type Withdraw @entity {
  id: ID!
  user: Bytes!
  underlyingAsset: Bytes!
  amount: BigInt!
  to: Bytes!

  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type Borrow @entity {
  id: ID!
  user: Bytes! # address
  loanId: Bytes!
  amount: BigInt!
  totalAssets: BigInt!
  token: Bytes! # address

  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  transactionInput: Bytes!
}

type AddCollateral @entity {
  id: ID! # assetId
  loanId: Bytes! # address
  collection: Bytes!
  tokenId: BigInt!

  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  transactionInput: Bytes!
}

type Asset @entity {
    id: ID!
    collection: Bytes!
    tokenId: BigInt!
    isOnAuction: Boolean!
    loan: Loan! 
}

type Repay @entity {
  id: ID!
  user: Bytes! # address
  loanId: Bytes!
  amount: BigInt!
  assets: [Bytes!]! # assetIds

  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  transactionInput: Bytes!
}

type Account @entity {
  id: ID!
  user: Bytes! # address
  amountDeposited: BigInt!
  amountBorrowed: BigInt!
  totalAssets: BigInt!
  borrows: [Loan!]! @derivedFrom(field: "user")
}

type Punk @entity(immutable: false) {
  id: ID!
  owner: Bytes! # address
}

type Bid @entity {
  id: ID!
  bidder: Bytes! # address
  bidAmount: BigInt!
  amountOfDebt: BigInt!
  amountToPay: BigInt!
  order: Order!
}

type Order @entity(immutable: false) {
  id: ID!
  status: BigInt!
  orderType: String!
  date: BigInt!
  assetId: Bytes! # bytes32
  collection: Bytes! # address
  tokenId: BigInt!
  seller: Bytes! # address
  loanId: Bytes! # bytes32
  debtToSell: BigInt!
  startAmount: BigInt!
  endAmount: BigInt!
  startTime: BigInt!
  endTime: BigInt!
  lastBidder: Bytes! # address
  lastBidAmount: BigInt!
  bidder: Bytes! # address
  bidAmount: BigInt!
  buyer: Bytes! # address
  buyerAmount: BigInt!
  bids: [Bid!]! @derivedFrom(field: "order")
  loan: Loan!
}

type MarketCreated @entity(immutable: false) {
  id: ID!
  loanId: Bytes! # bytes32
  assetId: Bytes! # bytes32
  orderId: Bytes! # bytes32
  collection: Bytes! # address
  tokenId: BigInt!

  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  transactionInput: Bytes!
}

type MarketBid @entity(immutable: false) {
  id: ID!
  loanId: Bytes! # bytes32
  orderId: Bytes! # bytes32
  assetId: Bytes! # bytes32
  amountToPay: BigInt! # address
  amountOfDebt: BigInt!
  amount: BigInt!
  user: Bytes!

  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  transactionInput: Bytes!
}

type MarketClaim @entity(immutable: false) {
  id: ID!
  user: Bytes!
  loanId: Bytes! # bytes32
  assetId: Bytes! # bytes32
  orderId: Bytes! # bytes32
  amount: BigInt! # address

  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  transactionInput: Bytes!
}

type MarketBuyNow @entity(immutable: false) {
  id: ID!
  user: Bytes!
  loanId: Bytes! # bytes32
  assetId: Bytes! # bytes32
  orderId: Bytes! # bytes32
  amount: BigInt! # address

  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  transactionInput: Bytes!
}

type Sold @entity(immutable: false) {
  id: ID!
  assetId: Bytes! # bytes32
  collection: Bytes! # address
  tokenId: BigInt!
  amount: BigInt!

  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  transactionInput: Bytes!
}

type ProxyCreated @entity(immutable: false) {
  id: ID!
  proxy: Bytes! # address

  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  transactionInput: Bytes!
}

type Loan @entity(immutable: false) {
  id: ID!
  status: BigInt!
  user: Account! # address
  amount: BigInt!
  totalAssets: BigInt!
  underlyingAsset: Bytes! # address
  assets: [Asset!]! @derivedFrom(field: "loan")
}

type AuctionOrderRedeemed @entity(immutable: false) {
  id: ID! 
  loanId: Bytes! # bytes32
  orderId: Bytes! # bytes32
  amountOfDebt: BigInt! 
  amountToPay: BigInt! 
  bonus: BigInt! 
  countBids: BigInt! 

  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  transactionInput: Bytes!
}

type AuctionBid @entity(immutable: false) {
  id: ID!
  loanId: Bytes! # bytes32
  orderId: Bytes! # bytes32
  assetId: Bytes! # bytes32
  amountToPay: BigInt!
  amountOfDebt: BigInt!
  user: Bytes!
  
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  transactionInput: Bytes!
}

type AuctionRedeem @entity(immutable: false) {
  id: ID!
  loanId: Bytes! # bytes32
  amount: BigInt!
  user: Bytes! # address 

  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  transactionInput: Bytes!
}

type AuctionFinalize @entity(immutable: false) {
  id: ID!
  loanId: Bytes! # bytes32
  orderId: Bytes! # bytes32
  assetId: Bytes! # bytes32
  debtAmount: BigInt! # address
  amount: BigInt! # address
  winner: Bytes! # address
  owner: Bytes! # address

  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  transactionInput: Bytes!
}

type OrderCreated @entity(immutable: false) {
  id: ID!
  loanId: Bytes!
  owner: Bytes!
  orderId: Bytes!
  orderType: BigInt!

  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  transactionInput: Bytes!
}

type SetLoanId @entity(immutable: false) {
  id: ID!
  index: Bytes!
  loanId: Bytes!

  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  transactionInput: Bytes!
}

type TotalCount @entity(immutable: false) {
  id: ID!
  totalCount: BigInt!
}

type Collection @entity(immutable: false) {
  id: ID!
  isAllowed: Boolean!

  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type ForceSold @entity(immutable: false) {
  id: ID!
  loanId: Bytes! # bytes32
  assetId: Bytes! # bytes32
  collection: Bytes! # address
  tokenId: BigInt!
  marketPrice: BigInt!

  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  transactionInput: Bytes!
}