specVersion: 0.0.7
schema:
  file: ./schema.graphql

dataSources:
  - kind: ethereum
    name: uTokenFactory
    network: sepolia
    source:
      address: "0x9d536e7d5ae6993091b64d11d27316c6b758d2da"
      abi: uTokenFactory
      startBlock: 5060856
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - BorrowOnBelhalf
        - Deposit
        - RepayOnBelhalf
        - Withdraw
      abis:
        - name: uTokenFactory
          file: ./abis/uTokenFactory.json
      eventHandlers:
        - event: Borrow(indexed address,indexed address,indexed address,uint256,bytes32,uint256)
          handler: handleUTokenBorrow
        - event: Supply(indexed address,indexed address,indexed address,uint256)
          handler: handleSupply
        - event: Repay(indexed address,indexed address,indexed address,uint256,bytes32,uint256)
          handler: handleUTokenRepay
        - event: Withdraw(indexed address,indexed address,indexed address,uint256)
          handler: handleWithdraw
      file: ./src/mappings.ts
  - kind: ethereum
    name: action
    network: sepolia
    source:
      address: "0x5de5e0bbd9f2f3b4fe18aae72d804cf60d502df9"
      abi: Action
      startBlock: 5060856 #4437551
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Loan
        - TotalCount
        - Borrow
        - Repay
        - Asset
      abis:
        - name: Action
          file: ./abis/Action.json
        - name: UnlockdHelper
          file: ./abis/UnlockdHelper.json
      eventHandlers:
        - event: Borrow(indexed address,indexed bytes32,uint256,uint256,address)
          handler: handleBorrow
        - event: Repay(indexed address,indexed bytes32,uint256,bytes32[])
          handler: handleRepay
      file: ./src/mappings.ts
  - kind: ethereum
    name: allowedControllers
    network: sepolia
    source:
      address: "0x8096f882737383120b5cb33d6d7e347f97aacaf0"
      abi: AllowedControllers
      startBlock: 5060856 #4437551
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Collection
      abis:
        - name: AllowedControllers
          file: ./abis/AllowedControllers.json
      eventHandlers:
        - event: Collections(indexed address,bool)
          handler: handleCollection
      file: ./src/mappings.ts
  - kind: ethereum
    name: sellNow
    network: sepolia
    source:
      address: "0x5de5e0bbd9f2f3b4fe18aae72d804cf60d502df9"
      abi: SellNow
      startBlock: 5060856 #4437551
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Sold
      abis:
        - name: SellNow
          file: ./abis/SellNow.json
      eventHandlers:
        - event: Sold(bytes32,bytes32,address,uint256,uint256)
          handler: handleSold
        - event: ForceSold(bytes32,bytes32,address,uint256,uint256)
          handler: handleForceSold
      file: ./src/mappings.ts
  - kind: ethereum
    name: market
    network: sepolia
    source:
      address: "0x74ee7899468617b46d872157306fb6ff45b894ca"
      abi: Market
      startBlock: 5060856 #4437551
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - MarketCreated
        - MarketBid
        - MarketClaim
        - MarketBuyNow
        - Order
        - Bid
      abis:
        - name: Market
          file: ./abis/Market.json
      eventHandlers:
        - event: MarketCreated(indexed bytes32,indexed bytes32,indexed bytes32,address,uint256)
          handler: handleMarketCreated
        - event: MarketCancelAuction(indexed bytes32,indexed bytes32,address)
          handler: handleMarketCancel
        - event: MarketBid(indexed bytes32,indexed bytes32,indexed bytes32,uint256,address)
          handler: handleMarketBid
        - event: MarketClaim(indexed bytes32,indexed bytes32,indexed bytes32,uint256,address)
          handler: handleMarketClaim
        - event: MarketBuyNow(indexed bytes32,indexed bytes32,indexed bytes32,uint256,address)
          handler: handleMarketBuyNow
      file: ./src/mappings.ts
  - kind: ethereum
    name: auction
    network: sepolia
    source:
      address: "0x5de5e0bbd9f2f3b4fe18aae72d804cf60d502df9"
      abi: Auction
      startBlock: 5060856 #4437551
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - AuctionBid
        - AuctionRedeem
        - AuctionFinalize
      abis:
        - name: Auction
          file: ./abis/Auction.json
      eventHandlers:
        - event: AuctionBid(indexed bytes32,indexed bytes32,indexed bytes32,uint256,address)
          handler: handleAuctionBid
        - event: AuctionRedeem(indexed bytes32,indexed bytes32,indexed bytes32,uint256,address)
          handler: handleAuctionRedeem
        - event: AuctionFinalize(indexed bytes32,indexed bytes32,indexed bytes32,uint256,uint256,address,address)
          handler: handleAuctionFinalize
      file: ./src/mappings.ts
  - kind: ethereum
    name: unlockd
    network: sepolia
    source:
      address: "0x5de5e0bbd9f2f3b4fe18aae72d804cf60d502df9"
      abi: Unlockd
      startBlock: 5060856 #4437551
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - ProxyCreated
      abis:
        - name: Unlockd
          file: ./abis/Unlockd.json
      eventHandlers:
        - event: ProxyCreated(indexed address,uint256)
          handler: handleProxyCreated
      file: ./src/mappings.ts
  - kind: ethereum
    name: orderLogic
    network: sepolia
    source:
      address: "0x598Ed8D60f7dBca23DFF871be27EF069c6479561"
      abi: OrderLogic
      startBlock: 5060856 #4437551
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - OrderCreated
      abis:
        - name: OrderLogic
          file: ./abis/OrderLogic.json
        - name: Action
          file: ./abis/Action.json
      eventHandlers:
        - event: OrderCreated(indexed address,indexed bytes32,indexed bytes32,uint8)
          handler: handleLoanCreated
      file: ./src/mappings.ts
  - kind: ethereum
    name: ProtocolOwner
    network: sepolia
    source:
      address: "0x9174eab1f40898663d058bfc0400edbc2054adb2"
      abi: ProtocolOwner
      startBlock: 5060856 #4437551
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - SetLoanId
      abis:
        - name: ProtocolOwner
          file: ./abis/ProtocolOwner.json
      eventHandlers:
        - event: SetLoanId(bytes32,bytes32)
          handler: handleSetLoanId
      file: ./src/mappings.ts
  - kind: ethereum
    name: CryptoPunks
    network: sepolia
    source:
      address: "0x987EfDB241fE66275b3594481696f039a82a799e"
      abi: CryptoPunks
      startBlock: 5060856 #4437551
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - PunkBought
        - PunkTransfer
        - Assign
        - Punk
      abis:
        - name: CryptoPunks
          file: ./abis/CryptoPunks.json
      eventHandlers:
        - event: PunkBought(indexed uint256,uint256,indexed address,indexed address)
          handler: handlePunkBought
        - event: PunkTransfer(indexed address,indexed address,uint256)
          handler: handlePunkTransfer
        - event: Assign(indexed address,uint256)
          handler: handleAssign
      file: ./src/mappings.ts
