specVersion: 0.0.7
schema:
  file: ./schema.graphql

dataSources:
  - kind: ethereum
    name: uToken
    network: sepolia
    source:
      address: "0xC46007f55d86bf9B4aFE6904A06c1A2BdebEE2A6"
      abi: uToken
      startBlock: 4712722
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - BorrowOnBelhalf
        - Deposit
        - RepayOnBelhalf
        - Withdraw
      abis:
        - name: uToken
          file: ./abis/uToken.json
      eventHandlers:
        - event: BorrowOnBelhalf(indexed address,indexed address,indexed uint256,bytes32,address,uint256)
          handler: handleBorrowOnBelhalf
        - event: Deposit(address,indexed address,uint256,indexed address,indexed uint16)
          handler: handleDeposit
        - event: RepayOnBelhalf(address,bytes32,address,indexed uint256,indexed address,uint256)
          handler: handleRepayOnBelhalf
        - event: Withdraw(indexed address,indexed address,uint256,indexed address)
          handler: handleWithdraw
      file: ./src/mappings.ts
  - kind: ethereum
    name: action
    network: sepolia
    source:
      address: "0xE636ED8a5A1Ac2808EF067fF3a76619d4ED86e34"
      abi: Action
      startBlock: 4712722 #4437551
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Loan
        - Borrow
        - Repay
        - Asset
      abis:
        - name: Action
          file: ./abis/Action.json
        - name: UnlockdHelper
          file: ./abis/UnlockdHelper.json
      eventHandlers:
        - event: Borrow(indexed address,indexed bytes32,uint256,uint256,address)
          handler: handleBorrow
        - event: Repay(indexed address,indexed bytes32,uint256,bytes32[])
          handler: handleRepay
      file: ./src/mappings.ts
  - kind: ethereum
    name: sellNow
    network: sepolia
    source:
      address: "0xE636ED8a5A1Ac2808EF067fF3a76619d4ED86e34"
      abi: SellNow
      startBlock: 4712722 #4437551
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Sold
      abis:
        - name: SellNow
          file: ./abis/SellNow.json
      eventHandlers:
        - event: Sold(bytes32,bytes32,address,uint256,uint256)
          handler: handleSold
      file: ./src/mappings.ts
  - kind: ethereum
    name: market
    network: sepolia
    source:
      address: "0xE636ED8a5A1Ac2808EF067fF3a76619d4ED86e34"
      abi: Market
      startBlock: 4712722 #4437551
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - MarketCreated
        - MarketBid
        - MarketClaim
        - MarketBuyNow
        - Order
        - Bid
      abis:
        - name: Market
          file: ./abis/Market.json
      eventHandlers:
        - event: MarketCreated(indexed bytes32,indexed bytes32,indexed bytes32,address,uint256)
          handler: handleMarketCreated
        - event: MarketCancelAuction(indexed bytes32,indexed bytes32,address)
          handler: handleMarketCancel
        - event: MarketBid(indexed bytes32,indexed bytes32,indexed bytes32,uint256,address)
          handler: handleMarketBid
        - event: MarketClaim(indexed bytes32,indexed bytes32,indexed bytes32,uint256,address)
          handler: handleMarketClaim
        - event: MarketBuyNow(indexed bytes32,indexed bytes32,indexed bytes32,uint256,address)
          handler: handleMarketBuyNow
      file: ./src/mappings.ts
  - kind: ethereum
    name: auction
    network: sepolia
    source:
      address: "0xE636ED8a5A1Ac2808EF067fF3a76619d4ED86e34"
      abi: Auction
      startBlock: 4712722 #4437551
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - AuctionBid
        - AuctionRedeem
        - AuctionFinalize
      abis:
        - name: Auction
          file: ./abis/Auction.json
      eventHandlers:
        - event: AuctionBid(indexed bytes32,indexed bytes32,indexed bytes32,uint256,address)
          handler: handleAuctionBid
        - event: AuctionRedeem(indexed bytes32,indexed bytes32,indexed bytes32,uint256,address)
          handler: handleAuctionRedeem
        - event: AuctionFinalize(indexed bytes32,indexed bytes32,indexed bytes32,uint256,uint256,address,address)
          handler: handleAuctionFinalize
      file: ./src/mappings.ts
  - kind: ethereum
    name: unlockd
    network: sepolia
    source:
      address: "0xE636ED8a5A1Ac2808EF067fF3a76619d4ED86e34"
      abi: Unlockd
      startBlock: 4712722 #4437551
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - ProxyCreated
      abis:
        - name: Unlockd
          file: ./abis/Unlockd.json
      eventHandlers:
        - event: ProxyCreated(indexed address,uint256)
          handler: handleProxyCreated
      file: ./src/mappings.ts
  - kind: ethereum
    name: orderLogic
    network: sepolia
    source:
      address: "0xE636ED8a5A1Ac2808EF067fF3a76619d4ED86e34"
      abi: OrderLogic
      startBlock: 4712722 #4437551
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - LoanCreated
      abis:
        - name: OrderLogic
          file: ./abis/OrderLogic.json
        - name: Action
          file: ./abis/Action.json
      eventHandlers:
        - event: LoanCreated(indexed address,indexed bytes32,uint256)
          handler: handleLoanCreated
      file: ./src/mappings.ts
  - kind: ethereum
    name: ProtocolOwner
    network: sepolia
    source:
      address: "0xf0f991c46D9b2abd33133aF42D36c3728FfAf299"
      abi: ProtocolOwner
      startBlock: 4712722 #4437551
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - SetLoanId
      abis:
        - name: ProtocolOwner
          file: ./abis/ProtocolOwner.json
      eventHandlers:
        - event: SetLoanId(bytes32,bytes32)
          handler: handleSetLoanId
      file: ./src/mappings.ts
  - kind: ethereum
    name: CryptoPunks
    network: sepolia
    source:
      address: "0x720b094Ab68D7306d1545AD615fDE974fA6D86D9"
      abi: CryptoPunks
      startBlock: 4712722 #4437551
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - PunkBought
        - PunkTransfer
        - Assign
        - Punk
      abis:
        - name: CryptoPunks
          file: ./abis/CryptoPunks.json
      eventHandlers:
        - event: PunkBought(indexed uint256,uint256,indexed address,indexed address)
          handler: handlePunkBought
        - event: PunkTransfer(indexed address,indexed address,uint256)
          handler: handlePunkTransfer
        - event: Assign(indexed address,uint256)
          handler: handleAssign
      file: ./src/mappings.ts
