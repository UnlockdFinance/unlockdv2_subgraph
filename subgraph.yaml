specVersion: 0.0.7
schema:
  file: ./schema.graphql

dataSources:
  - kind: ethereum
    name: uTokenVault
    network: sepolia
    source:
      address: "0xed0c72b10af9cd00919e240b02143d92bdc2a5cb"
      abi: uTokenVault
      startBlock: 5132406
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - BorrowOnBelhalf
        - Deposit
        - RepayOnBelhalf
        - Withdraw
      abis:
        - name: uTokenVault
          file: ./abis/uTokenVault.json
      eventHandlers:
        - event: Borrow(indexed address,indexed address,indexed address,uint256,bytes32,uint256)
          handler: handleUTokenBorrow
        - event: Deposit(indexed address,indexed address,indexed address,uint256)
          handler: handleSupply
        - event: Repay(indexed address,indexed address,indexed address,uint256,bytes32,uint256)
          handler: handleUTokenRepay
        - event: Withdraw(indexed address,indexed address,indexed address,uint256)
          handler: handleWithdraw
      file: ./src/mappings.ts
  - kind: ethereum
    name: action
    network: sepolia
    source:
      address: "0xd5c775369f8455b06ea5488b8400e0e2d597b8e5"
      abi: Action
      startBlock: 5132406 #4437551
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Loan
        - TotalCount
        - Borrow
        - Repay
        - Asset
      abis:
        - name: Action
          file: ./abis/Action.json
        - name: UnlockdHelper
          file: ./abis/UnlockdHelper.json
      eventHandlers:
        - event: Borrow(indexed address,indexed bytes32,uint256,uint256,address,(indexed address,uint256)[])
          handler: handleBorrow
        - event: Repay(indexed address,indexed bytes32,uint256,bytes32[])
          handler: handleRepay
      file: ./src/mappings.ts
  - kind: ethereum
    name: allowedControllers
    network: sepolia
    source:
      address: "0x4c4af24cf362f31be300434770cbcc58f31db84d"
      abi: AllowedControllers
      startBlock: 5132406 #4437551
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Collection
      abis:
        - name: AllowedControllers
          file: ./abis/AllowedControllers.json
      eventHandlers:
        - event: Collections(indexed address,bool)
          handler: handleCollection
      file: ./src/mappings.ts
  - kind: ethereum
    name: sellNow
    network: sepolia
    source:
      address: "0xd5c775369f8455b06ea5488b8400e0e2d597b8e5"
      abi: SellNow
      startBlock: 5132406 #4437551
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Sold
      abis:
        - name: SellNow
          file: ./abis/SellNow.json
      eventHandlers:
        - event: Sold(bytes32,bytes32,address,uint256,uint256)
          handler: handleSold
        - event: ForceSold(bytes32,bytes32,address,uint256,uint256)
          handler: handleForceSold
      file: ./src/mappings.ts
  - kind: ethereum
    name: market
    network: sepolia
    source:
      address: "0xd5c775369f8455b06ea5488b8400e0e2d597b8e5"
      abi: Market
      startBlock: 5132406 #4437551
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - MarketCreated
        - MarketBid
        - MarketClaim
        - MarketBuyNow
        - Order
        - Bid
      abis:
        - name: Market
          file: ./abis/Market.json
      eventHandlers:
        - event: MarketCreated(indexed bytes32,indexed bytes32,indexed bytes32,address,uint256)
          handler: handleMarketCreated
        - event: MarketCancelAuction(indexed bytes32,indexed bytes32,address)
          handler: handleMarketCancel
        - event: MarketBid(indexed bytes32,indexed bytes32,indexed bytes32,uint256,uint256,uint256,address)
          handler: handleMarketBid
        - event: MarketClaim(indexed bytes32,indexed bytes32,indexed bytes32,uint256,address)
          handler: handleMarketClaim
        - event: MarketBuyNow(indexed bytes32,indexed bytes32,indexed bytes32,uint256,address)
          handler: handleMarketBuyNow
      file: ./src/mappings.ts
  - kind: ethereum
    name: auction
    network: sepolia
    source:
      address: "0xd5c775369f8455b06ea5488b8400e0e2d597b8e5"
      abi: Auction
      startBlock: 5132406 #4437551
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - AuctionBid
        - AuctionRedeem
        - AuctionFinalize
      abis:
        - name: Auction
          file: ./abis/Auction.json
      eventHandlers:
        - event: AuctionBid(indexed bytes32,indexed bytes32,indexed bytes32,uint256,uint256,uint256,address)
          handler: handleAuctionBid
        - event: AuctionRedeem(indexed bytes32,indexed uint256,indexed address)
          handler: handleAuctionRedeem
        - event: AuctionFinalize(indexed bytes32,indexed bytes32,indexed bytes32,uint256,uint256,address,address)
          handler: handleAuctionFinalize
      file: ./src/mappings.ts
  - kind: ethereum
    name: unlockd
    network: sepolia
    source:
      address: "0xd5c775369f8455b06ea5488b8400e0e2d597b8e5"
      abi: Unlockd
      startBlock: 5132406 #4437551
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - ProxyCreated
      abis:
        - name: Unlockd
          file: ./abis/Unlockd.json
      eventHandlers:
        - event: ProxyCreated(indexed address,uint256)
          handler: handleProxyCreated
      file: ./src/mappings.ts
  - kind: ethereum
    name: orderLogic
    network: sepolia
    source:
      address: "0xd5c775369f8455b06ea5488b8400e0e2d597b8e5"
      abi: OrderLogic
      startBlock: 5132406 #4437551
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - OrderCreated
      abis:
        - name: OrderLogic
          file: ./abis/OrderLogic.json
        - name: Action
          file: ./abis/Action.json
      eventHandlers:
        - event: OrderCreated(indexed address,indexed bytes32,indexed bytes32,uint8)
          handler: handleOrderCreated
      file: ./src/mappings.ts
  - kind: ethereum
    name: ProtocolOwner
    network: sepolia
    source:
      address: "0x28fb73f263b968fe41876484d0524756c3f25a90"
      abi: ProtocolOwner
      startBlock: 5132406 #4437551
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - SetLoanId
      abis:
        - name: ProtocolOwner
          file: ./abis/ProtocolOwner.json
      eventHandlers:
        - event: SetLoanId(bytes32,bytes32)
          handler: handleSetLoanId
      file: ./src/mappings.ts
  - kind: ethereum
    name: CryptoPunks
    network: sepolia
    source:
      address: "0x987EfDB241fE66275b3594481696f039a82a799e"
      abi: CryptoPunks
      startBlock: 5132406 #4437551
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - PunkBought
        - PunkTransfer
        - Assign
        - Punk
      abis:
        - name: CryptoPunks
          file: ./abis/CryptoPunks.json
      eventHandlers:
        - event: PunkBought(indexed uint256,uint256,indexed address,indexed address)
          handler: handlePunkBought
        - event: PunkTransfer(indexed address,indexed address,uint256)
          handler: handlePunkTransfer
        - event: Assign(indexed address,uint256)
          handler: handleAssign
      file: ./src/mappings.ts
